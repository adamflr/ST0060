<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 6 Beskrivande statistik | R-anvisningar till Grundläggande statistik</title>
  <meta name="description" content="Kapitel 6 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 6 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 6 Beskrivande statistik | R-anvisningar till Grundläggande statistik" />
  
  
  



<meta name="date" content="2021-09-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sannolikhetsfördelningar-och-slumptal.html"/>
<link rel="next" href="ett-stickprov.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R-anvisningar</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduktion</a></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#inledning"><i class="fa fa-check"></i><b>2.1</b> Inledning</a></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#installation-av-r"><i class="fa fa-check"></i><b>2.2</b> Installation av R</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#installation-av-rstudio"><i class="fa fa-check"></i><b>2.3</b> Installation av RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="installation.html"><a href="installation.html#gränssnittet-i-rstudio"><i class="fa fa-check"></i><b>2.4</b> Gränssnittet i RStudio</a></li>
<li class="chapter" data-level="2.5" data-path="installation.html"><a href="installation.html#paket-i-r"><i class="fa fa-check"></i><b>2.5</b> Paket i R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="objekt-och-funktioner.html"><a href="objekt-och-funktioner.html"><i class="fa fa-check"></i><b>3</b> Objekt och funktioner</a>
<ul>
<li class="chapter" data-level="3.1" data-path="objekt-och-funktioner.html"><a href="objekt-och-funktioner.html#sekvenser-av-funktioner"><i class="fa fa-check"></i><b>3.1</b> Sekvenser av funktioner</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataimport.html"><a href="dataimport.html"><i class="fa fa-check"></i><b>4</b> Dataimport</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dataimport.html"><a href="dataimport.html#direkt-inskrivning-av-data"><i class="fa fa-check"></i><b>4.1</b> Direkt inskrivning av data</a></li>
<li class="chapter" data-level="4.2" data-path="dataimport.html"><a href="dataimport.html#import-från-en-extern-fil"><i class="fa fa-check"></i><b>4.2</b> Import från en extern fil</a></li>
<li class="chapter" data-level="4.3" data-path="dataimport.html"><a href="dataimport.html#egna-funktioner"><i class="fa fa-check"></i><b>4.3</b> Egna funktioner</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sannolikhetsfördelningar-och-slumptal.html"><a href="sannolikhetsfördelningar-och-slumptal.html"><i class="fa fa-check"></i><b>5</b> Sannolikhetsfördelningar och slumptal</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sannolikhetsfördelningar-och-slumptal.html"><a href="sannolikhetsfördelningar-och-slumptal.html#fördelningar"><i class="fa fa-check"></i><b>5.1</b> Fördelningar</a></li>
<li class="chapter" data-level="5.2" data-path="sannolikhetsfördelningar-och-slumptal.html"><a href="sannolikhetsfördelningar-och-slumptal.html#simuleringar"><i class="fa fa-check"></i><b>5.2</b> Simuleringar</a></li>
<li class="chapter" data-level="5.3" data-path="sannolikhetsfördelningar-och-slumptal.html"><a href="sannolikhetsfördelningar-och-slumptal.html#övningar"><i class="fa fa-check"></i><b>5.3</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html"><i class="fa fa-check"></i><b>6</b> Beskrivande statistik</a>
<ul>
<li class="chapter" data-level="6.1" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#datamängd"><i class="fa fa-check"></i><b>6.1</b> Datamängd</a></li>
<li class="chapter" data-level="6.2" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#filtrering-av-rader-och-selektion-av-kolumner"><i class="fa fa-check"></i><b>6.2</b> Filtrering av rader och selektion av kolumner</a></li>
<li class="chapter" data-level="6.3" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#transformationer-av-variabler"><i class="fa fa-check"></i><b>6.3</b> Transformationer av variabler</a></li>
<li class="chapter" data-level="6.4" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#sammanfattande-statistik"><i class="fa fa-check"></i><b>6.4</b> Sammanfattande statistik</a></li>
<li class="chapter" data-level="6.5" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#grafer"><i class="fa fa-check"></i><b>6.5</b> Grafer</a></li>
<li class="chapter" data-level="6.6" data-path="beskrivande-statistik.html"><a href="beskrivande-statistik.html#övningar-1"><i class="fa fa-check"></i><b>6.6</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ett-stickprov.html"><a href="ett-stickprov.html"><i class="fa fa-check"></i><b>7</b> Ett stickprov</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ett-stickprov.html"><a href="ett-stickprov.html#normalfördelad-data-eller-stora-stickprov"><i class="fa fa-check"></i><b>7.1</b> Normalfördelad data (eller stora stickprov)</a></li>
<li class="chapter" data-level="7.2" data-path="ett-stickprov.html"><a href="ett-stickprov.html#binär-data.-proportioner"><i class="fa fa-check"></i><b>7.2</b> Binär data. Proportioner</a></li>
<li class="chapter" data-level="7.3" data-path="ett-stickprov.html"><a href="ett-stickprov.html#nominal-eller-ordinal-data.-goodness-of-fit"><i class="fa fa-check"></i><b>7.3</b> Nominal eller ordinal data. Goodness-of-fit</a></li>
<li class="chapter" data-level="7.4" data-path="ett-stickprov.html"><a href="ett-stickprov.html#övningar-2"><i class="fa fa-check"></i><b>7.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="två-stickprov.html"><a href="två-stickprov.html"><i class="fa fa-check"></i><b>8</b> Två stickprov</a>
<ul>
<li class="chapter" data-level="8.1" data-path="två-stickprov.html"><a href="två-stickprov.html#normalfördelad-data-eller-stora-stickprov-1"><i class="fa fa-check"></i><b>8.1</b> Normalfördelad data (eller stora stickprov)</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="två-stickprov.html"><a href="två-stickprov.html#t-test-för-två-matchade-stickprov"><i class="fa fa-check"></i><b>8.1.1</b> t-test för två matchade stickprov</a></li>
<li class="chapter" data-level="8.1.2" data-path="två-stickprov.html"><a href="två-stickprov.html#t-test-för-två-oberoende-stickprov"><i class="fa fa-check"></i><b>8.1.2</b> t-test för två oberoende stickprov</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="två-stickprov.html"><a href="två-stickprov.html#binär-data.-proportioner-1"><i class="fa fa-check"></i><b>8.2</b> Binär data. Proportioner</a></li>
<li class="chapter" data-level="8.3" data-path="två-stickprov.html"><a href="två-stickprov.html#nominal-eller-ordinal-data.-korstabeller"><i class="fa fa-check"></i><b>8.3</b> Nominal eller ordinal data. Korstabeller</a></li>
<li class="chapter" data-level="8.4" data-path="två-stickprov.html"><a href="två-stickprov.html#övningar-3"><i class="fa fa-check"></i><b>8.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="variansanalys.html"><a href="variansanalys.html"><i class="fa fa-check"></i><b>9</b> Variansanalys</a>
<ul>
<li class="chapter" data-level="9.1" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor"><i class="fa fa-check"></i><b>9.1</b> Variansanalys. En faktor</a></li>
<li class="chapter" data-level="9.2" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-en-faktor-med-block"><i class="fa fa-check"></i><b>9.2</b> Variansanalys. En faktor med block</a></li>
<li class="chapter" data-level="9.3" data-path="variansanalys.html"><a href="variansanalys.html#variansanalys.-två-faktorer-med-block"><i class="fa fa-check"></i><b>9.3</b> Variansanalys. Två faktorer med block</a></li>
<li class="chapter" data-level="9.4" data-path="variansanalys.html"><a href="variansanalys.html#övningar-4"><i class="fa fa-check"></i><b>9.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html"><i class="fa fa-check"></i><b>10</b> Regression och korrelation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#regression"><i class="fa fa-check"></i><b>10.1</b> Regression</a></li>
<li class="chapter" data-level="10.2" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#korrelation"><i class="fa fa-check"></i><b>10.2</b> Korrelation</a></li>
<li class="chapter" data-level="10.3" data-path="regression-och-korrelation.html"><a href="regression-och-korrelation.html#övningar-5"><i class="fa fa-check"></i><b>10.3</b> Övningar</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-anvisningar till <em>Grundläggande statistik</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="beskrivande-statistik" class="section level1" number="6">
<h1><span class="header-section-number">Kapitel 6</span> Beskrivande statistik</h1>
<p>I det här avsnittet använder vi R för att sammanfatta och illustrera en datamängd. Vi kommer bland annat titta på att</p>
<ul>
<li>filtrera ut intressanta observationer,</li>
<li>välja ut intressanta variabler,</li>
<li>beräkna medelvärde, median, varians, standardavvikelse och andra sammanfattande mått,</li>
<li>konstruera och tolka grafer.</li>
</ul>
<div id="datamängd" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Datamängd</h2>
<p>Som exempeldata använder vi data från <em>Gapminder</em> - en stiftelse med mål att sprida information om ekonomisk utveckling och hälsa, grundad av Hans Rosling (1948-2017). Datamängden finns tillgänglig i R-paketet <code>gapminder</code>.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="beskrivande-statistik.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb98-2"><a href="beskrivande-statistik.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span></code></pre></div>
<p>Efter att paketet laddas med <code>library(gapminder)</code> är datan tillgänglig under namnet <code>gapminder</code>. Man kan skriva ut de första raderna genom</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="beskrivande-statistik.html#cb99-1" aria-hidden="true" tabindex="-1"></a>gapminder</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # ... with 1,694 more rows</code></pre>
<p>Datan anger förväntad medellivslängd, populationsstorlek och bnp per capita, per land och år (vart femte år från 1952 till 2007).</p>
</div>
<div id="filtrering-av-rader-och-selektion-av-kolumner" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Filtrering av rader och selektion av kolumner</h2>
<p>En vanlig operation på en tabell är att göra ett urval - antingen ett urval av rader (t.ex. ett visst land eller år), vilket vi kallar <em>filtrering</em> eller ett urval av variabler (t.ex. år och population), vilket vi kallar selektion.
Det finns flera olika sätt att göra ett urval i R.
Det traditionella sättet är att använda index inom hakparenteser (t.ex. <code>gapminder[4, 2]</code> för fjärde raden, andra kolumnen) eller dollartecken för specifika kolumner (t.ex. <code>gapminder$pop</code> för befolkningskolumnen).
Här fokuseras dock på hur det kan göras med funktionerna <code>filter</code> och <code>select</code> från paketet <code>tidyverse</code>.</p>
<p>För att filtrera på ett givet land kan använda pipe-funktionen från datan till en filter-funktion, t.ex.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="beskrivande-statistik.html#cb101-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                 <span class="co"># Ta gapminder-datan och sen</span></span>
<span id="cb101-2"><a href="beskrivande-statistik.html#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Sweden&quot;</span>) <span class="co"># filtrera för specifikt land</span></span></code></pre></div>
<pre><code>## # A tibble: 12 x 6
##    country continent  year lifeExp     pop gdpPercap
##    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
##  1 Sweden  Europe     1952    71.9 7124673     8528.
##  2 Sweden  Europe     1957    72.5 7363802     9912.
##  3 Sweden  Europe     1962    73.4 7561588    12329.
##  4 Sweden  Europe     1967    74.2 7867931    15258.
##  5 Sweden  Europe     1972    74.7 8122293    17832.
##  6 Sweden  Europe     1977    75.4 8251648    18856.
##  7 Sweden  Europe     1982    76.4 8325260    20667.
##  8 Sweden  Europe     1987    77.2 8421403    23587.
##  9 Sweden  Europe     1992    78.2 8718867    23880.
## 10 Sweden  Europe     1997    79.4 8897619    25267.
## 11 Sweden  Europe     2002    80.0 8954175    29342.
## 12 Sweden  Europe     2007    80.9 9031088    33860.</code></pre>
<p>Inom filter-funktionen anges ett logisk villkor och utfallet är de rader där villkoret är sant. Notera de dubbla likhetstecknen - de måste användas för ett logisk villkor eftersom enkelt likhetstecken används för att skapa objekt och sätta funktionsargument. Om man vill välja flera länder kan man använda funktionen <code>%in%</code> på följande sätt</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="beskrivande-statistik.html#cb103-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="beskrivande-statistik.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sweden&quot;</span>, <span class="st">&quot;Denmark&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 24 x 6
##    country continent  year lifeExp     pop gdpPercap
##    &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
##  1 Denmark Europe     1952    70.8 4334000     9692.
##  2 Denmark Europe     1957    71.8 4487831    11100.
##  3 Denmark Europe     1962    72.4 4646899    13583.
##  4 Denmark Europe     1967    73.0 4838800    15937.
##  5 Denmark Europe     1972    73.5 4991596    18866.
##  6 Denmark Europe     1977    74.7 5088419    20423.
##  7 Denmark Europe     1982    74.6 5117810    21688.
##  8 Denmark Europe     1987    74.8 5127024    25116.
##  9 Denmark Europe     1992    75.3 5171393    26407.
## 10 Denmark Europe     1997    76.1 5283663    29804.
## # ... with 14 more rows</code></pre>
<p>och om man vill ha mer än ett villkor kan man rada dem i filter-funktionen eller ha flera filter-steg:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="beskrivande-statistik.html#cb105-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="beskrivande-statistik.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sweden&quot;</span>, <span class="st">&quot;Denmark&quot;</span>),</span>
<span id="cb105-3"><a href="beskrivande-statistik.html#cb105-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">1987</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   country continent  year lifeExp     pop gdpPercap
##   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
## 1 Denmark Europe     1987    74.8 5127024    25116.
## 2 Sweden  Europe     1987    77.2 8421403    23587.</code></pre>
<p>alternativt</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="beskrivande-statistik.html#cb107-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="beskrivande-statistik.html#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sweden&quot;</span>, <span class="st">&quot;Denmark&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="beskrivande-statistik.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1987</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   country continent  year lifeExp     pop gdpPercap
##   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
## 1 Denmark Europe     1987    74.8 5127024    25116.
## 2 Sweden  Europe     1987    77.2 8421403    23587.</code></pre>
<p>Om man istället vill göra ett urval av kolumner kan man använda <code>select</code>. Som argument anges de kolumner man vill välja, t.ex.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="beskrivande-statistik.html#cb109-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="beskrivande-statistik.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, pop)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 2
##    country          pop
##    &lt;fct&gt;          &lt;int&gt;
##  1 Afghanistan  8425333
##  2 Afghanistan  9240934
##  3 Afghanistan 10267083
##  4 Afghanistan 11537966
##  5 Afghanistan 13079460
##  6 Afghanistan 14880372
##  7 Afghanistan 12881816
##  8 Afghanistan 13867957
##  9 Afghanistan 16317921
## 10 Afghanistan 22227415
## # ... with 1,694 more rows</code></pre>
<p>Låt oss avsluta med en lite mer komplicerat exempel där vi gör ett urval av land, kontinent och befolkning för länder utanför Europa som 2002 hade en befolkning över 50 miljoner</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="beskrivande-statistik.html#cb111-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                     <span class="co"># Ta datan och sen</span></span>
<span id="cb111-2"><a href="beskrivande-statistik.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">!=</span> <span class="st">&quot;Europe&quot;</span>,   <span class="co"># filtrera på kontinent ej lika med (!=) Europa,</span></span>
<span id="cb111-3"><a href="beskrivande-statistik.html#cb111-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2002</span>,            <span class="co"># år lika med 2002,</span></span>
<span id="cb111-4"><a href="beskrivande-statistik.html#cb111-4" aria-hidden="true" tabindex="-1"></a>         pop <span class="sc">&gt;</span> <span class="dv">50000000</span>) <span class="sc">%&gt;%</span>      <span class="co"># befolkning över 50 mil, och sen</span></span>
<span id="cb111-5"><a href="beskrivande-statistik.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, continent, pop) <span class="co"># selektera på land, kontinent och befolkning</span></span></code></pre></div>
<pre><code>## # A tibble: 17 x 3
##    country          continent        pop
##    &lt;fct&gt;            &lt;fct&gt;          &lt;int&gt;
##  1 Bangladesh       Asia       135656790
##  2 Brazil           Americas   179914212
##  3 China            Asia      1280400000
##  4 Congo, Dem. Rep. Africa      55379852
##  5 Egypt            Africa      73312559
##  6 Ethiopia         Africa      67946797
##  7 India            Asia      1034172547
##  8 Indonesia        Asia       211060000
##  9 Iran             Asia        66907826
## 10 Japan            Asia       127065841
## 11 Mexico           Americas   102479927
## 12 Nigeria          Africa     119901274
## 13 Pakistan         Asia       153403524
## 14 Philippines      Asia        82995088
## 15 Thailand         Asia        62806748
## 16 United States    Americas   287675526
## 17 Vietnam          Asia        80908147</code></pre>
</div>
<div id="transformationer-av-variabler" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Transformationer av variabler</h2>
<p>Variabler kan omräknas och nya variabler kan skapas med <code>mutate</code>-funktionen. I datan har vi befolkning och bnp per capita, så det är naturligt att beräkna total bnp som produkten av de två variablerna genom</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="beskrivande-statistik.html#cb113-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="beskrivande-statistik.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdptotal =</span> gdpPercap <span class="sc">*</span> pop)</span></code></pre></div>
<p>Den inledande delen med <code>gapminder &lt;-</code> gör så att utfallet av beräkningen sparas i gapminder-datan.
Vi kan skriva ut objektet och se resultatet av beräkningen:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="beskrivande-statistik.html#cb114-1" aria-hidden="true" tabindex="-1"></a>gapminder</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 7
##    country     continent  year lifeExp      pop gdpPercap     gdptotal
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.
##  2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.
##  3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.
##  4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.
##  5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.
##  6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.
##  7 Afghanistan Asia       1982    39.9 12881816      978. 12598563401.
##  8 Afghanistan Asia       1987    40.8 13867957      852. 11820990309.
##  9 Afghanistan Asia       1992    41.7 16317921      649. 10595901589.
## 10 Afghanistan Asia       1997    41.8 22227415      635. 14121995875.
## # ... with 1,694 more rows</code></pre>
</div>
<div id="sammanfattande-statistik" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Sammanfattande statistik</h2>
<p>För att presentera insamlad data på ett tolkningsbart sätt används sammanfattande mått såsom summor, medelvärden, medianer och standardavvikelser.
Den typen av beräkningar kan göras som ett nytt steg i en pipe med hjälp av funktionen <code>summarise</code>. Om man kombinerar <code>summarise</code> med funktionen <code>group_by</code> kan man dessutom summera efter en indelning given av en annan variabel. En beräkning av total befolkningsmängd per år kan till exempel ges av</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="beskrivande-statistik.html#cb116-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span>                           <span class="co"># Ta datan och sen</span></span>
<span id="cb116-2"><a href="beskrivande-statistik.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span>                    <span class="co"># gruppera efter år och sen</span></span>
<span id="cb116-3"><a href="beskrivande-statistik.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Totalbefolkning =</span> <span class="fu">sum</span>(pop) <span class="sc">/</span> <span class="fl">1e9</span>) <span class="co"># summera per grupp</span></span></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##     year Totalbefolkning
##    &lt;int&gt;           &lt;dbl&gt;
##  1  1952            2.41
##  2  1957            2.66
##  3  1962            2.90
##  4  1967            3.22
##  5  1972            3.58
##  6  1977            3.93
##  7  1982            4.29
##  8  1987            4.69
##  9  1992            5.11
## 10  1997            5.52
## 11  2002            5.89
## 12  2007            6.25</code></pre>
<p>I det sista steget skapas en variabel <em>Totalbefolkning</em> som ges av summan av den ursprungliga variabeln <em>pop</em>.</p>
<p>Funktionerna <code>summarise_at</code> och <code>summarise_all</code> kan användas för att summera flera variabler i ett steg. Man kan också ange mer än en funktion, om man vill beräkna flera olika mått.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="beskrivande-statistik.html#cb118-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="beskrivande-statistik.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="beskrivande-statistik.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="beskrivande-statistik.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">c</span>(<span class="st">&quot;lifeExp&quot;</span>, <span class="st">&quot;pop&quot;</span>), <span class="fu">c</span>(mean, sd, median))</span></code></pre></div>
<pre><code>## # A tibble: 5 x 7
##   continent lifeExp_fn1    pop_fn1 lifeExp_fn2    pop_fn2 lifeExp_fn3   pop_fn3
##   &lt;fct&gt;           &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Africa           54.8  17875763.       9.63   24917726.        52.9 10093310.
## 2 Americas         73.6  35954847.       4.44   68833781.        72.9  9319622 
## 3 Asia             70.7 115513752.       7.96  289673399.        72.4 24821286 
## 4 Europe           77.6  19536618.       2.98   23624744.        78.6  9493598 
## 5 Oceania          80.7  12274974.       0.729  11538855.        80.7 12274974.</code></pre>
<p>Kolumnerna för förväntat medelllivslängd och befolkning sammanfattas med medelvärde, standardavvikelse och median.</p>
</div>
<div id="grafer" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Grafer</h2>
<p>R har en mängd grundläggande funktioner för grafer. Ett enkelt spridningsdiagram kan till exempel skapas med</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="beskrivande-statistik.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gapminder<span class="sc">$</span>gdpPercap, gapminder<span class="sc">$</span>lifeExp)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-69-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Tecknet <code>$</code> används hör för att välja en kolumn i en tabell.</p>
<p>För mer avancerade grafer används dock ofta funktioner ur Rs paketbibliotek. Här illustreras det mest populära - <code>ggplot2</code>. I <code>ggplot2</code> byggs grafer upp med tre grundläggande byggstenar:</p>
<ul>
<li><em>data</em>, informationen man vill visualisera,</li>
<li><em>aestethics</em>, en koppling data och visuella element som grafens axlar, objekts storlek och färg,</li>
<li><em>geometries</em>, de geometriska former som visas i grafen.</li>
</ul>
<p>En graf skrivs med en startfunktion <code>ggplot</code> som anger namnet på datan och grafens <em>aestethics</em>, och därefter sätts geometriska element genom funktioner som börjar med <code>geom_</code>. Ett spridningsdiagram kan t.ex. skapas med <code>geom_point</code>.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="beskrivande-statistik.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb121-2"><a href="beskrivande-statistik.html#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-70-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Grafen kan byggas ut genom att sätta <em>aestethics</em> för färg och storlek. Man kan också dela en graf i småfönster med <code>facet_wrap</code> och styra grafens utseende genom att sätta ett tema såsom <code>theme_bw</code>.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="beskrivande-statistik.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(gdpPercap), <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb122-2"><a href="beskrivande-statistik.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb122-3"><a href="beskrivande-statistik.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-71-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Här används dessutom log-transformerad bnp per capita för att få en jämnare fördelning i x-axeln.</p>
<p>Andra graftyper kan skapas med andra <code>geom_</code>-funktioner. För ett linjediagram används <code>geom_line</code>. De observationer som ska ge en specifik linje anges med <code>group</code> i <code>aes</code>-funktionen.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="beskrivande-statistik.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">group =</span> country)) <span class="sc">+</span></span>
<span id="cb123-2"><a href="beskrivande-statistik.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-72-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Stapeldiagram ges av <code>geom_bar</code>. Om diagrammet ska visa ett urval av data kan man skriva grafen som sista steget i en längre pipe, t.ex.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="beskrivande-statistik.html#cb124-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="beskrivande-statistik.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb124-3"><a href="beskrivande-statistik.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">rank</span>(<span class="sc">-</span>pop) <span class="sc">&lt;=</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb124-4"><a href="beskrivande-statistik.html#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pop, <span class="at">y =</span> <span class="fu">reorder</span>(country, pop), <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb124-5"><a href="beskrivande-statistik.html#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-73-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Här ger <code>rank(-pop) &lt;= 20</code> att landets rang, dess värde i storleksordning, är minst 20, <code>reorder(country, pop)</code> att länder skrivs ut i grafen i storleksordning, och <code>stat = "identity"</code> att värdet för pop ska skrivas ut i grafen som det är (utan att transformeras).</p>

</div>
<div id="övningar-1" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Övningar</h2>
<div class="exercise">
<p><span id="exr:unlabeled-div-17" class="exercise"><strong>Övning 6.1  (Antal barn) </strong></span>Antal barn per familj för 30 familjer är</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="beskrivande-statistik.html#cb125-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb125-2"><a href="beskrivande-statistik.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">matrix</span>(dat, <span class="dv">3</span>))</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>a. Sammanfatta materialet i en frekvenstabell och illustrera materialet med ett lämpligt diagram.</p>
<p>b. Beräkna genomsnittligt antal barn per familj.</p>
<p>c. Beräkna variansen.</p>
<p>d. Pröva att ändra sista värdet till 30 och se vad som händer med resultaten.</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-18" class="hypothesis"><strong>Lösningsförslag 6.1  (Antal barn) </strong></span>Datan kan illustreras med ett stapeldiagram och beskrivande statistik kan beräknas med lämpliga funktioner.</p>
<p>a.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="beskrivande-statistik.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat)</span></code></pre></div>
<pre><code>## dat
## 0 1 2 3 4 5 8 
## 6 9 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="beskrivande-statistik.html#cb128-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">`</span><span class="at">Antal barn</span><span class="st">`</span> <span class="ot">=</span> dat)</span>
<span id="cb128-2"><a href="beskrivande-statistik.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="st">`</span><span class="at">Antal barn</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb128-3"><a href="beskrivande-statistik.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-76-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>b.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="beskrivande-statistik.html#cb129-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(<span class="fu">c</span>(mean, median, var))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##     fn1   fn2   fn3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  2.03   1.5  3.55</code></pre>
<p>c.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="beskrivande-statistik.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(dat<span class="sc">$</span><span class="st">`</span><span class="at">Antal barn</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] 3.550575</code></pre>
<p>d.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="beskrivande-statistik.html#cb133-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span><span class="st">`</span><span class="at">Antal barn</span><span class="st">`</span>[<span class="dv">30</span>] <span class="ot">&lt;-</span> <span class="dv">30</span> <span class="co"># Ändra trettionde värde till 30</span></span>
<span id="cb133-2"><a href="beskrivande-statistik.html#cb133-2" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(<span class="fu">c</span>(mean, median, var))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##     fn1   fn2   fn3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  2.93   1.5  29.7</code></pre>
<p>Medelvärde ökar med ungefär 1, medianen är densamma (varför?) och variansen ökar kraftigt.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-19" class="exercise"><strong>Övning 6.2  (Darwindata) </strong></span>Följande data gäller längden (i tum) hos 15 stycken plantor som fortplantats genom självbefruktning:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="beskrivande-statistik.html#cb135-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">174</span>,<span class="dv">204</span>,<span class="dv">200</span>,<span class="dv">200</span>,<span class="dv">184</span>,<span class="dv">186</span>,<span class="dv">186</span>,<span class="dv">153</span>,<span class="dv">165</span>,<span class="dv">180</span>,<span class="dv">163</span>,<span class="dv">180</span>,<span class="dv">128</span>,<span class="dv">155</span>,<span class="dv">180</span>, <span class="cn">NA</span>) <span class="sc">/</span> <span class="dv">10</span></span>
<span id="cb135-2"><a href="beskrivande-statistik.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">matrix</span>(dat, <span class="dv">2</span>, <span class="at">byrow =</span> T))</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
17.4
</td>
<td style="text-align:right;">
20.4
</td>
<td style="text-align:right;">
20.0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
18.4
</td>
<td style="text-align:right;">
18.6
</td>
<td style="text-align:right;">
18.6
</td>
<td style="text-align:right;">
15.3
</td>
</tr>
<tr>
<td style="text-align:right;">
16.5
</td>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
16.3
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
12.8
</td>
<td style="text-align:right;">
15.5
</td>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
<p>a. Beräkna medelvärdet.</p>
<p>b. Beräkna medianen.</p>
<p>c. Beräkna variansen.</p>
<p>d. Beskriv fördelningen med ett histogram.</p>
<p>e. Beskriv fördelningen med ett lådagram.</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-20" class="hypothesis"><strong>Lösningsförslag 6.2  (Darwindata) </strong></span>Funktionen <code>summarise_all</code> kan användas för att beräkna medelvärde, median och varians. Grafer kan konstrueras med <code>geom_histogram</code> och <code>geom_boxplot</code>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="beskrivande-statistik.html#cb136-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tibble</span>(Längd <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">174</span>,<span class="dv">204</span>,<span class="dv">200</span>,<span class="dv">200</span>,<span class="dv">184</span>,<span class="dv">186</span>,<span class="dv">186</span>,</span>
<span id="cb136-2"><a href="beskrivande-statistik.html#cb136-2" aria-hidden="true" tabindex="-1"></a>                        <span class="dv">153</span>,<span class="dv">165</span>,<span class="dv">180</span>,<span class="dv">163</span>,<span class="dv">180</span>,<span class="dv">128</span>,<span class="dv">155</span>,<span class="dv">180</span>))</span>
<span id="cb136-3"><a href="beskrivande-statistik.html#cb136-3" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb136-4"><a href="beskrivande-statistik.html#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="fu">c</span>(mean, median, var))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##     fn1   fn2   fn3
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  176.   180  415.</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="beskrivande-statistik.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(Längd)) <span class="sc">+</span> </span>
<span id="cb138-2"><a href="beskrivande-statistik.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-81-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="beskrivande-statistik.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(<span class="st">&quot;Självbefruktning&quot;</span>, Längd)) <span class="sc">+</span> </span>
<span id="cb139-2"><a href="beskrivande-statistik.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-81-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>Storleken på intervallen i histogrammets x-axel kan styras med <code>binwidth</code>.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-21" class="exercise"><strong>Övning 6.3  (Stapeldiagram med felstaplar) </strong></span>Darwins studie gav följande data:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="beskrivande-statistik.html#cb140-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">&quot;Data/Uppgiftsdata.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Darwin&quot;</span>)</span>
<span id="cb140-2"><a href="beskrivande-statistik.html#cb140-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-3"><a href="beskrivande-statistik.html#cb140-3" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb140-4"><a href="beskrivande-statistik.html#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb140-5"><a href="beskrivande-statistik.html#cb140-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Metod, <span class="at">values_from =</span> Utfall) <span class="sc">%&gt;%</span> </span>
<span id="cb140-6"><a href="beskrivande-statistik.html#cb140-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ID) <span class="sc">%&gt;%</span> </span>
<span id="cb140-7"><a href="beskrivande-statistik.html#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Självbefruktade
</th>
<th style="text-align:right;">
Korsbefruktade
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
17.4
</td>
<td style="text-align:right;">
23.5
</td>
</tr>
<tr>
<td style="text-align:right;">
20.4
</td>
<td style="text-align:right;">
12.0
</td>
</tr>
<tr>
<td style="text-align:right;">
20.0
</td>
<td style="text-align:right;">
21.0
</td>
</tr>
<tr>
<td style="text-align:right;">
20.0
</td>
<td style="text-align:right;">
22.0
</td>
</tr>
<tr>
<td style="text-align:right;">
18.4
</td>
<td style="text-align:right;">
19.1
</td>
</tr>
<tr>
<td style="text-align:right;">
18.6
</td>
<td style="text-align:right;">
21.5
</td>
</tr>
<tr>
<td style="text-align:right;">
18.6
</td>
<td style="text-align:right;">
22.1
</td>
</tr>
<tr>
<td style="text-align:right;">
15.3
</td>
<td style="text-align:right;">
20.4
</td>
</tr>
<tr>
<td style="text-align:right;">
16.5
</td>
<td style="text-align:right;">
18.3
</td>
</tr>
<tr>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
21.6
</td>
</tr>
<tr>
<td style="text-align:right;">
16.3
</td>
<td style="text-align:right;">
23.3
</td>
</tr>
<tr>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
21.0
</td>
</tr>
<tr>
<td style="text-align:right;">
12.8
</td>
<td style="text-align:right;">
22.1
</td>
</tr>
<tr>
<td style="text-align:right;">
15.5
</td>
<td style="text-align:right;">
23.0
</td>
</tr>
<tr>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
12.0
</td>
</tr>
</tbody>
</table>
<p>Konstruera ett stapeldiagram med felstaplar där stapelns höjd ges av medelvärdet inom gruppen och felstapelns längd av standardavvikelsen inom gruppen.</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-22" class="hypothesis"><strong>Lösningsförslag 6.3  (Stapeldiagram med felstaplar) </strong></span>Felstaplar kan konstrueras genom att beräkna medelvärde och standardavvikelse, och sedan <em>pipa</em> in i en plot där staplar konstrueras med <code>geom_bar</code> och felstaplar med <code>geom_errorbar</code>.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="beskrivande-statistik.html#cb141-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="beskrivande-statistik.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Metod) <span class="sc">%&gt;%</span> </span>
<span id="cb141-3"><a href="beskrivande-statistik.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">m =</span> <span class="fu">mean</span>(Utfall), <span class="at">s =</span> <span class="fu">sd</span>(Utfall)) <span class="sc">%&gt;%</span> </span>
<span id="cb141-4"><a href="beskrivande-statistik.html#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Metod, m)) <span class="sc">+</span></span>
<span id="cb141-5"><a href="beskrivande-statistik.html#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb141-6"><a href="beskrivande-statistik.html#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> m <span class="sc">-</span> s, <span class="at">ymax =</span> m <span class="sc">+</span> s), <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb141-7"><a href="beskrivande-statistik.html#cb141-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">&quot;Felstapel anger +/- en standardavvikelse&quot;</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-83-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Det är inte alltid klart vilket spridningsmått felstaplarna illusterar (vanliga alternativ är standardavvikelsen, medelfelet (standardavvikelsen delat på roten ur stickprovsstorleken) och konfidensintervallet). Det är därför god praxis att skriva ut vad felstaplarna anger.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-23" class="exercise"><strong>Övning 6.4  (Animal Crossing) </strong></span>TidyTuesday (<a href="https://github.com/rfordatascience/tidytuesday" class="uri">https://github.com/rfordatascience/tidytuesday</a>) är ett R-kopplat projekt som varje vecka släpper ett nytt dataset, med tanken att vemsomhelst kan analysera datan och publicera informativa grafer. Ta gärna titt på Twitter under taggen <em>tidytuesday</em>. Ett dataset från TidyTuesday täcker bybor från spelserien <em>Animal Crossing</em>. Datan kan läsas in med</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="beskrivande-statistik.html#cb142-1" aria-hidden="true" tabindex="-1"></a>villagers <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/villagers.csv&#39;</span>)</span></code></pre></div>
<p>a. Illustrera fördelning mellan arter (kolumnen <em>species</em>) med ett lämpligt diagram. Försök att med hjälp av en internetsökning lösa de problem som kan uppstå med överlappande etiketter och ordning på staplar.</p>
<p>b. Utveckla diagrammet från (a) genom att på lämpligt sätt ange personlighet (kolumnen <em>personality</em>).</p>
<p>c. Vilken är spelens mest populära låt?</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-24" class="hypothesis"><strong>Lösningsförslag 6.4  (Animal Crossing) </strong></span>a.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="beskrivande-statistik.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(villagers, <span class="fu">aes</span>(species)) <span class="sc">+</span></span>
<span id="cb143-2"><a href="beskrivande-statistik.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-85-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>En internetsökning på exempelvis ‘ggplot2 bar order’ kommer ge flera möjliga lösningar - en är att använda <code>fct_reorder</code> från paketet <code>forcats</code>, vilket ordnar en faktor efter antalet förekomster (genom att sätta funktionen till <code>length</code>).
Överlappande etiketter kan också lösas på ett par olika sätt (lutande etiketter, etiketter på olika nivåer). En enkel lösning är att vrida staplarna och få etiketterna till vänster med <code>coord_flip</code>.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="beskrivande-statistik.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(villagers, <span class="fu">aes</span>(forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(species, species, <span class="at">.fun =</span> length))) <span class="sc">+</span></span>
<span id="cb144-2"><a href="beskrivande-statistik.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb144-3"><a href="beskrivande-statistik.html#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Art&quot;</span>) <span class="sc">+</span></span>
<span id="cb144-4"><a href="beskrivande-statistik.html#cb144-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-86-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>b.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="beskrivande-statistik.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(villagers, <span class="fu">aes</span>(forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(species, species, <span class="at">.fun =</span> length), <span class="at">fill =</span> personality)) <span class="sc">+</span></span>
<span id="cb145-2"><a href="beskrivande-statistik.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb145-3"><a href="beskrivande-statistik.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Art&quot;</span>) <span class="sc">+</span></span>
<span id="cb145-4"><a href="beskrivande-statistik.html#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-87-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>c.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="beskrivande-statistik.html#cb146-1" aria-hidden="true" tabindex="-1"></a>villagers <span class="sc">%&gt;%</span> </span>
<span id="cb146-2"><a href="beskrivande-statistik.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(song, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 93 x 2
##    song              n
##    &lt;chr&gt;         &lt;int&gt;
##  1 &lt;NA&gt;             11
##  2 K.K. Country     10
##  3 Forest Life       9
##  4 I Love You        7
##  5 Imperial K.K.     7
##  6 K.K. Lament       7
##  7 K.K. Lullaby      7
##  8 K.K. Ragtime      7
##  9 K.K. Soul         7
## 10 Cafe K.K.         6
## # ... with 83 more rows</code></pre>
<p>Det vanligaste alternativet är att sång saknas, vilket då anges som <code>NA</code>. Den mest populära faktiska sången är <em>KK Country</em>.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-25" class="exercise"><strong>Övning 6.5  (Allsvenskan för herrar) </strong></span>Bland kursdatan finns en fil med matchresultat från herrarnas fotbollsallsvenska, 1924 - 2019. Läs in datan och undersök följande.</p>
<p>a. Hur många gånger har Malmö FF mött Mjällby? Vilket datum inföll Mjällbys enda seger?</p>
<p>b. Fyra säsonger har lag gått rent på hemmaplan (segrar i samtliga matcher). Vilka är de två lagen och vilka är de fyra säsongerna?</p>
<p>c. Vilka är de målrikaste matcherna?</p>
<p>d. Producera ett spridningsdiagram med hemmamål på x-axeln och bortamål på y-axeln. Hur kan man hantera överlappande punkter?</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-26" class="hypothesis"><strong>Lösningsförslag 6.5  (Allsvenskan för herrar) </strong></span>Filen kan läsas in med <code>read_csv</code> från <code>readr</code>.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="beskrivande-statistik.html#cb148-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/Allsvenskan, herrar, 1924-2019.csv&quot;</span>)</span></code></pre></div>
<p>a. Matcher kan filtreras ut genom filter-funktionen. Två skilda rader kan användas för att få både hemma- och borta-matcher.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="beskrivande-statistik.html#cb149-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(hemma <span class="sc">==</span> <span class="st">&quot;Malmö FF&quot;</span>, borta <span class="sc">==</span> <span class="st">&quot;Mjällby&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 6
##   datum      sasong hemma    borta   hemmamal bortamal
##   &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt;
## 1 1980-05-03 1980   Malmö FF Mjällby        1        0
## 2 1983-04-17 1983   Malmö FF Mjällby        1        1
## 3 1985-06-13 1985   Malmö FF Mjällby        2        0
## 4 2010-11-07 2010   Malmö FF Mjällby        2        0
## 5 2011-04-20 2011   Malmö FF Mjällby        1        0
## 6 2012-09-01 2012   Malmö FF Mjällby        1        1
## 7 2013-09-30 2013   Malmö FF Mjällby        1        0
## 8 2014-09-27 2014   Malmö FF Mjällby        4        1</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="beskrivande-statistik.html#cb151-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(hemma <span class="sc">==</span> <span class="st">&quot;Mjällby&quot;</span>, borta <span class="sc">==</span> <span class="st">&quot;Malmö FF&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 6
##   datum      sasong hemma   borta    hemmamal bortamal
##   &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;
## 1 1980-07-30 1980   Mjällby Malmö FF        1        1
## 2 1983-10-02 1983   Mjällby Malmö FF        1        1
## 3 1985-08-11 1985   Mjällby Malmö FF        1        1
## 4 2010-05-15 2010   Mjällby Malmö FF        4        2
## 5 2011-08-06 2011   Mjällby Malmö FF        1        1
## 6 2012-05-03 2012   Mjällby Malmö FF        2        2
## 7 2013-05-17 2013   Mjällby Malmö FF        2        2
## 8 2014-05-22 2014   Mjällby Malmö FF        0        1</code></pre>
<p>Lagen har mötts sexton gånger. Den enda malmöförlusten inträffade 2010 på bortaplan.</p>
<p>b. Andelen vinster på hemmaplan kan tas fram genom att gruppera på lag och säsong, beräkna antalet segrar och antalet matcher, och slutligen beräkna andelen segrar.
För att beräkna antalet vinster kan man använda <code>sum(hemmamal &gt; bortamal)</code> - summan av antal gånger hemmamålen överstiger bortamålen. För det totala antalet matcher en säsong kan man använda funktionen <code>n()</code> - antalet rader i en viss gruppering.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="beskrivande-statistik.html#cb153-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb153-2"><a href="beskrivande-statistik.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hemma, sasong) <span class="sc">%&gt;%</span> </span>
<span id="cb153-3"><a href="beskrivande-statistik.html#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Vinster =</span> <span class="fu">sum</span>(hemmamal <span class="sc">&gt;</span> bortamal), <span class="at">Total =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb153-4"><a href="beskrivande-statistik.html#cb153-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proportion =</span> Vinster <span class="sc">/</span> Total) <span class="sc">%&gt;%</span> </span>
<span id="cb153-5"><a href="beskrivande-statistik.html#cb153-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Proportion <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 5
## # Groups:   hemma [2]
##   hemma        sasong    Vinster Total Proportion
##   &lt;chr&gt;        &lt;chr&gt;       &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
## 1 IFK Göteborg 1934_1935      11    11          1
## 2 IFK Göteborg 1941_1942      11    11          1
## 3 Malmö FF     1949_1950      11    11          1
## 4 Malmö FF     1950_1951      11    11          1</code></pre>
<p>Två lag (IFK Göteborg och Malmö FF) med två gånger var (1934-35 och 1941-42 respektive 1949-50 och 1950-51).</p>
<p>c. Skapa en ny variabel för totalt antal mål och sortera efter den kolumnen.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="beskrivande-statistik.html#cb155-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb155-2"><a href="beskrivande-statistik.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(Mål <span class="ot">=</span> hemmamal <span class="sc">+</span> bortamal) <span class="sc">%&gt;%</span> </span>
<span id="cb155-3"><a href="beskrivande-statistik.html#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>Mål) <span class="sc">%&gt;%</span> </span>
<span id="cb155-4"><a href="beskrivande-statistik.html#cb155-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 14,996 x 7
##   datum      sasong    hemma         borta      hemmamal bortamal   Mål
##   &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1 1928-10-21 1928_1929 Helsingborg   Eskilstuna       13        1    14
## 2 1936-04-19 1935_1936 Eskilstuna    Elfsborg          2       12    14
## 3 1954-11-06 1954_1955 Sandviken AIK AIK               4        9    13
## 4 1927-10-30 1927_1928 AIK           Eskilstuna        8        4    12
## 5 1928-11-04 1928_1929 Sleipner      Eskilstuna        7        5    12
## # ... with 14,991 more rows</code></pre>
<p>Två gånger har det blivit 14 mål. Bägge gångerna förluster för Eskilstuna.</p>
<p>d. Ett spridningsdiagram kan skapas med <code>ggplot</code>. Ett sätt att hantera överlappande punkter är att ge punkterna ett <em>jitter</em> (ett slumpmässig justering så att de inte längre överlappar). Man kan också använda <code>geom_count</code>, vilket gör att punktens storlek beror på antal överlappande observationer, eller skriva ut antalet överlappande fall.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="beskrivande-statistik.html#cb157-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(hemmamal, bortamal)) <span class="sc">+</span></span>
<span id="cb157-2"><a href="beskrivande-statistik.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size =</span> <span class="fl">0.1</span>)</span>
<span id="cb157-3"><a href="beskrivande-statistik.html#cb157-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-4"><a href="beskrivande-statistik.html#cb157-4" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(hemmamal, bortamal)) <span class="sc">+</span></span>
<span id="cb157-5"><a href="beskrivande-statistik.html#cb157-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_count</span>()</span>
<span id="cb157-6"><a href="beskrivande-statistik.html#cb157-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-7"><a href="beskrivande-statistik.html#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb157-8"><a href="beskrivande-statistik.html#cb157-8" aria-hidden="true" tabindex="-1"></a>g1 <span class="sc">+</span> g2</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-93-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Det verkar som att 1-1 är det vanligaste resultatet. För att få en siffra kan man räkna hemma- och bortamål med <code>count</code>, för att sedan plotta med <code>geom_text</code>.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="beskrivande-statistik.html#cb158-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb158-2"><a href="beskrivande-statistik.html#cb158-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(hemmamal, bortamal) <span class="sc">%&gt;%</span> </span>
<span id="cb158-3"><a href="beskrivande-statistik.html#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(hemmamal, bortamal, <span class="at">label =</span> n)) <span class="sc">+</span></span>
<span id="cb158-4"><a href="beskrivande-statistik.html#cb158-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-94-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Det verkar som att 1-1, följt av 2-1 och 1-0 är de vanligaste resultaten.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-27" class="exercise"><strong>Övning 6.6  (Väderstation Falsterbo) </strong></span>SMHI publicerar historisk väderdata från en stor mängd väderstationer (<a href="https://www.smhi.se/data/meteorologi/ladda-ner-meteorologiska-observationer" class="uri">https://www.smhi.se/data/meteorologi/ladda-ner-meteorologiska-observationer</a>). Ett exempel på en sådan fil, från väderstationen i Falsterbo, finns bland kursdatan. Notera att flera inledande rader innehåller metadata och inte ska läsas in. Filen är dessutom inte kommaseparerad utan semikolon-separerad. Den kan läsas in med funktionen <code>read_csv2</code> från <code>readr</code>. Vid inläsning kan man också ändra datatyp för temperaturkolumnen, som annars felaktigt tolkats som en textkolumn.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="beskrivande-statistik.html#cb159-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;Data/smhi-opendata_1_52230_20210912_114534.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb159-2"><a href="beskrivande-statistik.html#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lufttemperatur =</span> <span class="fu">as.numeric</span>(Lufttemperatur))</span></code></pre></div>
<p>a. Vilken är den högst uppmätta temperaturen?</p>
<p>b. Beräkna max-temperaturen för varje år. Plotta ett linjediagram med år på x-axeln och maxtemperatur på y-axeln.</p>
<p>c. Skapa en variabel som anger observationens årtionde. Beräkna medeltemperaturen per årtionde och illustrera med lämplig graf.</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-28" class="hypothesis"><strong>Lösningsförslag 6.6  (Väderstation Falsterbo) </strong></span>a. Ordna data efter lufttemperatur och skriv ut de översta raderna.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="beskrivande-statistik.html#cb160-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Lufttemperatur)) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 245,869 x 6
##    Datum      `Tid (UTC)` Lufttemperatur Kvalitet ...5  `Tidsutsnitt:`
##    &lt;date&gt;     &lt;time&gt;               &lt;dbl&gt; &lt;chr&gt;    &lt;lgl&gt; &lt;chr&gt;         
##  1 1994-07-31 12:00                 29.6 G        NA    &lt;NA&gt;          
##  2 1911-08-01 13:00                 28.8 G        NA    &lt;NA&gt;          
##  3 2018-08-03 15:00                 28.8 G        NA    &lt;NA&gt;          
##  4 2018-07-26 15:00                 28.7 G        NA    &lt;NA&gt;          
##  5 1994-07-28 12:00                 28.4 G        NA    &lt;NA&gt;          
##  6 2012-08-19 15:00                 28.4 G        NA    &lt;NA&gt;          
##  7 1994-07-28 15:00                 28.3 G        NA    &lt;NA&gt;          
##  8 2014-07-09 12:00                 28.2 G        NA    &lt;NA&gt;          
##  9 2018-08-02 15:00                 28.2 G        NA    &lt;NA&gt;          
## 10 2018-07-26 12:00                 28.1 G        NA    &lt;NA&gt;          
## # ... with 245,859 more rows</code></pre>
<p>Fem av de tio högsta mätningarna inträffade mellan 26 juli och 3 augusti 2018. Två samma dag.</p>
<p>b. Beräkningen kan göras genom att skapa en årsvariabel med <code>year</code> från <code>lubridate</code>-paketet. Därefter gruppera per år och summera med <code>max</code>-funktionen.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="beskrivande-statistik.html#cb162-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span></span>
<span id="cb162-2"><a href="beskrivande-statistik.html#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(Å<span class="at">r =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(Datum)) <span class="sc">%&gt;%</span> </span>
<span id="cb162-3"><a href="beskrivande-statistik.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(År) <span class="sc">%&gt;%</span> </span>
<span id="cb162-4"><a href="beskrivande-statistik.html#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Maxtemperatur =</span> <span class="fu">max</span>(Lufttemperatur)) <span class="sc">%&gt;%</span> </span>
<span id="cb162-5"><a href="beskrivande-statistik.html#cb162-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(År, Maxtemperatur)) <span class="sc">+</span></span>
<span id="cb162-6"><a href="beskrivande-statistik.html#cb162-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-97-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Datan visar på stor variation mellan år.</p>
<p>c. Likt (b) kan man skapa en årsvariabel och från den beräkna årtionde genom att dela på tio, använda <code>floor</code> för att ta bort decimalen, och sedan multiplicera med tio. Därefter kan man gruppera efter årtionde och summera till medelvärdet.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="beskrivande-statistik.html#cb163-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> </span>
<span id="cb163-2"><a href="beskrivande-statistik.html#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(Å<span class="at">rtionde =</span> <span class="fu">floor</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(Datum) <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb163-3"><a href="beskrivande-statistik.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Årtionde) <span class="sc">%&gt;%</span> </span>
<span id="cb163-4"><a href="beskrivande-statistik.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Medeltemperatur =</span> <span class="fu">mean</span>(Lufttemperatur)) <span class="sc">%&gt;%</span> </span>
<span id="cb163-5"><a href="beskrivande-statistik.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Årtionde, Medeltemperatur, <span class="at">fill =</span> Medeltemperatur)) <span class="sc">+</span></span>
<span id="cb163-6"><a href="beskrivande-statistik.html#cb163-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb163-7"><a href="beskrivande-statistik.html#cb163-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-98-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Temperaturen verkar öka i Falsterbo. Märk att stapeln för 2020-talet bara innefattar ett år.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-29" class="exercise"><strong>Övning 6.7  (Relativ frekvens) </strong></span>Säg att man kastar ett häftstift och att sannolikheten att stiftet stannar spetsen upp är 0.66. Simulera tusen häftstiftskast och beräkna den relativa frekvensen häftstiften hamnat med spetsen uppåt. Den relativa frekvensen för en serie värden ges av antalet positiva utfall delat på antalet kast för varje kast. Den relativa frekvensen efter 35 kast är till exempel antalet positiva utfall bland de 35, delat på 35.
Illustrera med ett linjediagram.</p>
<p>Ledning: tusen kast kan simuleras med <code>rbin(1000, 1, 0.66)</code>, vilket skapar tusen slumptal från en binomialfördelning där <span class="math inline">\(n = 1\)</span> och <span class="math inline">\(p = 0.67\)</span>.</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-30" class="hypothesis"><strong>Lösningsförslag 6.7  (Relativ frekvens) </strong></span>För att beräkna och illustrera den relativa frekvensen skapas en <code>tibble</code> där den första kolumnen anger antalet kast vid varje steg, det vill säga en kolumn som anger ett till tusen. Därefter dras tusen slumptal enligt ledningen ovan. Därefter beräknas den <em>kumulativa summan</em> - antalet positiva utfall upp till det kast som anges för raden. Och slutligen beräknas den relativa frekvensen genom att ta den kumulativa summan och dela med antalet kast.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="beskrivande-statistik.html#cb164-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Kast =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>,</span>
<span id="cb164-2"><a href="beskrivande-statistik.html#cb164-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">Utfall =</span> <span class="fu">rbinom</span>(<span class="dv">1000</span>, <span class="dv">1</span>, <span class="fl">0.67</span>),</span>
<span id="cb164-3"><a href="beskrivande-statistik.html#cb164-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">Antal_spets_upp =</span> <span class="fu">cumsum</span>(Utfall),</span>
<span id="cb164-4"><a href="beskrivande-statistik.html#cb164-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">Relativ_frekvens =</span> Antal_spets_upp <span class="sc">/</span> Kast)</span>
<span id="cb164-5"><a href="beskrivande-statistik.html#cb164-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-6"><a href="beskrivande-statistik.html#cb164-6" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 4
##     Kast Utfall Antal_spets_upp Relativ_frekvens
##    &lt;int&gt;  &lt;int&gt;           &lt;int&gt;            &lt;dbl&gt;
##  1     1      1               1            1    
##  2     2      0               1            0.5  
##  3     3      1               2            0.667
##  4     4      1               3            0.75 
##  5     5      1               4            0.8  
##  6     6      0               4            0.667
##  7     7      1               5            0.714
##  8     8      0               5            0.625
##  9     9      1               6            0.667
## 10    10      1               7            0.7  
## # ... with 990 more rows</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="beskrivande-statistik.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(Kast, Relativ_frekvens)) <span class="sc">+</span></span>
<span id="cb166-2"><a href="beskrivande-statistik.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb166-3"><a href="beskrivande-statistik.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">0.66</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb166-4"><a href="beskrivande-statistik.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code></pre></div>
<p><img src="R-anvisningar_files/figure-html/unnamed-chunk-99-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Den relativa frekvensen stabiliseras efter ett par hundra kast.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-31" class="exercise"><strong>Övning 6.8  (Egenskapad standardavvikelsefunktion) </strong></span>En styrka med R är hur enkelt nya funktioner kan skapas. Många standardfunktioner är skrivna i R. Ta som exempel funktionen för standardavvikelse:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="beskrivande-statistik.html#cb167-1" aria-hidden="true" tabindex="-1"></a>sd</span></code></pre></div>
<pre><code>## function (x, na.rm = FALSE) 
## sqrt(var(if (is.vector(x) || is.factor(x)) x else as.double(x), 
##     na.rm = na.rm))
## &lt;bytecode: 0x000000001b6b0408&gt;
## &lt;environment: namespace:stats&gt;</code></pre>
<p>Standardavvikelsen beräknas alltså som kvadratroten (<code>sqrt</code>) av variansen (<code>var</code>). Sedan finns också lite mer avancerad kod för att hantera olika typer av ingångsdata.</p>
<p>Standardavvikelsen av <span class="math inline">\(n\)</span> datapunkter ges av</p>
<p><span class="math display">\[s = \sqrt{\frac{1}{n-1}\sum_{i=1}^n (x_i - \bar x)^2},\]</span></p>
<p>vilket kan brytas upp i steg som (1) beräkna medelvärdet, (2) dra ifrån medelvärdet från varje datavärde, (3) kvadrera differenserna, (4) summera kvadraterna, (5) dela summan med <span class="math inline">\(n-1\)</span>, och (6) ta kvadratroten ur kvoten.</p>
<p>Skapa en egen standardavvikelsefunktion baserat på de stegen. Funktionen ska ta en godtycklig mängd värden som ingångsvärden och ge standardavvikelsen som output.</p>
</div>
<div class="hypothesis">
<p><span id="hyp:unlabeled-div-32" class="hypothesis"><strong>Lösningsförslag 6.8  (Egenskapad standardavvikelsefunktion) </strong></span>Funktionen nedan går igenom stegen för att beräkna standardavvikelsen.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="beskrivande-statistik.html#cb169-1" aria-hidden="true" tabindex="-1"></a>egen_sd <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb169-2"><a href="beskrivande-statistik.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)          <span class="co"># Spara datans storlek som n</span></span>
<span id="cb169-3"><a href="beskrivande-statistik.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  medel <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)        <span class="co"># 1</span></span>
<span id="cb169-4"><a href="beskrivande-statistik.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  diffs <span class="ot">&lt;-</span> x <span class="sc">-</span> medel      <span class="co"># 2</span></span>
<span id="cb169-5"><a href="beskrivande-statistik.html#cb169-5" aria-hidden="true" tabindex="-1"></a>  kvadrater <span class="ot">&lt;-</span> diffs<span class="sc">^</span><span class="dv">2</span>    <span class="co"># 3</span></span>
<span id="cb169-6"><a href="beskrivande-statistik.html#cb169-6" aria-hidden="true" tabindex="-1"></a>  summa <span class="ot">&lt;-</span> <span class="fu">sum</span>(kvadrater) <span class="co"># 4</span></span>
<span id="cb169-7"><a href="beskrivande-statistik.html#cb169-7" aria-hidden="true" tabindex="-1"></a>  kvot <span class="ot">&lt;-</span> summa <span class="sc">/</span> (n <span class="sc">-</span> <span class="dv">1</span>) <span class="co"># 5</span></span>
<span id="cb169-8"><a href="beskrivande-statistik.html#cb169-8" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(kvot)         <span class="co"># 6</span></span>
<span id="cb169-9"><a href="beskrivande-statistik.html#cb169-9" aria-hidden="true" tabindex="-1"></a>  s                       <span class="co"># Ange output</span></span>
<span id="cb169-10"><a href="beskrivande-statistik.html#cb169-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb169-11"><a href="beskrivande-statistik.html#cb169-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-12"><a href="beskrivande-statistik.html#cb169-12" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">9</span>)</span>
<span id="cb169-13"><a href="beskrivande-statistik.html#cb169-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(dat)</span></code></pre></div>
<pre><code>## [1] 2.966479</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="beskrivande-statistik.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">egen_sd</span>(dat)</span></code></pre></div>
<pre><code>## [1] 2.966479</code></pre>
<p>Den egenskapade funktionen ger samma utfall som R funktionen <code>sd</code>.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sannolikhetsfördelningar-och-slumptal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ett-stickprov.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "sepia",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-anvisningar.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
